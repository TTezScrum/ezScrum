*** Settings ***
Library           keywords/lib/Selenium2Improved.py
Resource          keywords/ezScrum_Login.txt
Library           BuiltIn
Library           Collections
Resource          keywords/common_resource.txt
Resource          keywords/Project/ezScrum_Project.txt
Resource          Global Define.txt
Resource          keywords/Notification/Notification_Setup_Teardown.txt
Resource          keywords/TaskBoard/ezScrum_TaskBoard.txt
Library           keywords/lib/CheckConnect.py

*** Test Cases ***
Test Notification
    [Setup]    Notification_Setup
    Element Should Be Visible    xpath=//img[@id="Notification_Subscript"]
    Click button    xpath=//button[text()="Setting Attention Project"]
    ${TestNotification_attr}=    Get Element Attribute    //ul[@class="x-menu-list"]/li@class
    ${TestNotification}=    get text    xpath=//ul[@class="x-menu-list"]/li/a/span
    Should Contain    ${TestNotification_attr}    x-menu-item-checked
    Should Be Equal As Strings    ${TestNotification}    Test Notification service
    Click element    xpath=//ul[@class="x-menu-list"]/li/a/span
    ${TestNotification_attr}=    Get Element Attribute    //ul[@class="x-menu-list"]/li@class
    Should not Contain    ${TestNotification_attr}    x-menu-item-checked
    Click button    xpath=//button[text()="Setting Attention Project"]
    Click button    xpath=//button[text()="Setting Attention Project"]
    ${TestNotification_attr}=    Get Element Attribute    //ul[@class="x-menu-list"]/li@class
    Should not Contain    ${TestNotification_attr}    x-menu-item-checked
    Click element    xpath=//ul[@class="x-menu-list"]/li/a/span
    Click button    xpath=//button[text()="Setting Attention Project"]
    Click button    xpath=//button[text()="Setting Attention Project"]
    ${TestNotification_attr}=    Get Element Attribute    //ul[@class="x-menu-list"]/li@class
    Should Contain    ${TestNotification_attr}    x-menu-item-checked
    [Teardown]    Notification_Teardown

Test Notification - send message
    [Setup]    Notification_Setup
    Select Project    Test Notification service
    Sleep    5s
    Wait Until Page Contains    TaskBoard
    Click element    //span[text()="TaskBoard"]
    Select Node Product    TaskBoard
    Task Checked Out With Arguments    1    1
    Wait Until Page Contains    Notification
    Wait Until Page Contains    Success
    [Teardown]    Notification_Teardown

Test Notification - Check Service Start
    ${port}=    Convert To Integer    5000
    ${return}=    check_Connect    140.124.181.99    ${port}
    Log    ${return}
    ${result}=    Convert to String    ${return}
    Should be Equal    ${result}    True
