*** Settings ***
Suite Teardown    Data Base Tear Down
Force Tags        Serial Number
Resource          ServerConfig.txt
Resource          Global Define.txt
Resource          keywords/ezScrum_Login.txt
Library           keywords/lib/Selenium2Improved.py
Resource          keywords/Project/ezScrum_Project.txt
Resource          keywords/common_resource.txt
Resource          keywords/SprintBacklog/ezScrum_SprintBacklog_Story.txt
Resource          keywords/SprintBacklog/ezScrum_SprintBacklog_Task.txt
Resource          keywords/Unplan/ezScrum_Unplan.txt
Resource          keywords/SerialNumber/ezScrum_SerialNumber.txt

*** Test Cases ***
Test Serial Number - Check ID In Sprint Plan
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Sprint_Plan.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    Sprint Plan
    Create Sprint    second sprint1    2    4    100    100
    Create Sprint Without StartDate    second sprint2    2    4    100    100
    Compare Text In Specific Xpath    //div[text() ="second sprint1"]/../../td[1]/div    1    #4    #should be 1
    Compare Text In Specific Xpath    //div[text() ="second sprint2"]/../../td[1]/div    2    #5    #should be 2
    Delete Sprint
    Create Sprint Without StartDate    second sprint3    2    4    100    100
    Compare Text In Specific Xpath    //div[text() ="second sprint3"]/../../td[1]/div    3    #6    #should be 3
    Select Node Product    Product Backlog
    Add A New Story With Story Name And Value    story1    13
    Add A New Story With Story Name And Value    story2    8
    Select Sprint Backlog Page And Add All Existing Story
    Reload Page
    Select Node Product    Sprint Plan
    Click Element    xpath=//div[text()="second sprint1"]
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[1]/div    1    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="story2"]/../../td[1]/div    2    #5    #should be 2
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Product Backlog
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Product_Backlog.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    Product Backlog
    Add A New Story With Story Name And Value    story1    10
    Add A New Story With Story Name And Value    story2    10
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[2]/div    1
    Compare Text In Specific Xpath    //div[text()="story2"]/../../td[2]/div    2
    Delete Story
    Add A New Story With Story Name And Value    story3    10
    Compare Text In Specific Xpath    //div[text()="story3"]/../../td[2]/div    3
    Select Node Product    Sprint Plan
    Create Sprint    test sprint    2    4    100    100
    Select Sprint Backlog Page And Add All Existing Story
    Select Node Product    Product Backlog
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[6]/div    4
    Compare Text In Specific Xpath    //div[text()="story3"]/../../td[6]/div    4
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Sprint Backlog
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Sprint_Backlog.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    Sprint Plan
    Create Sprint    test sprint    2    4    100    100
    Select Node Product    Sprint Backlog
    Click Element    xpath=//button[text()="Add Existing Stories"]
    Wait Until Page Contains    Add Existing Stories
    Mouse Down    xpath=//div[@class='x-grid3-hd-checker']    # click check box header
    Mouse Up    xpath=//div[@class='x-grid3-hd-checker']
    Click Element    xpath=//button[text()="Add Existed Stories"]
    Wait Until Page Contains    Add Existing Stories
    Add Task With Arguments    1    task1    10    note    #4    #should be 1
    Add Task With Arguments    3    task2    10    note    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="task1"]/../../td[1]/a/span    1    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="task2"]/../../td[1]/a/span    2    #5    #should be 2
    Drop Task With Arguments    task2
    Add Task With Arguments    3    task3    10    note    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="task3"]/../../td[1]/a/span    3    #6    #should be 3
    Click Element    xpath=//tr[@class="x-toolbar-left-row"]/td[2]/div/input
    Compare Text In Specific Xpath    //div[text()="Sprint #1"]/../div[1]    Sprint #4    #Sprint #7    #should be Sprint #4
    Compare Text In Specific Xpath    //div[text()="Sprint #1"]/../div[2]    Sprint #3    #Sprint #6    #should be Sprint #3
    Compare Text In Specific Xpath    //div[text()="Sprint #1"]/../div[3]    Sprint #1    #Sprint #4    #should be Sprint #1
    \    #Sprint #4
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[1]/a/span    1    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="story3"]/../../td[1]/a/span    3    #6    #should be 3
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Release Plan
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Release_Plan.sql
    Click Element    xpath=//div[text()="second"]
    Add A New Release Plan    2016/02/29    2016/03/27
    Compare Text In Specific Xpath    //div[text()="first release"]/../../td[1]/a/span    1    #2    #should be 1
    Compare Text In Specific Xpath    //div[text()="second sprint1"]/../../td[1]/a/span    1    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="second sprint3"]/../../td[1]/a/span    3    #6    #should be 3
    Click Element    //div[text()="first release"]/../../td[1]/a/span
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[1]/div    1    #check story ID    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="story3"]/../../td[1]/div    3    #check story ID    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[8]/div    1    #check release ID    #2    #should be 1
    Compare Text In Specific Xpath    //div[text()="story3"]/../../td[8]/div    1    #check release ID    #2    #should be 1
    Compare Text In Specific Xpath    //div[text()="story1"]/../../td[9]/div    3    #check Sprint ID    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="story3"]/../../td[9]/div    3    #check Sprint ID    #6    #should be 3
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Unplan Item
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Unplan_Item.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    Unplanned
    Add A New Unplanned Item    unplanned1
    Add A New Unplanned Item    unplanned2
    Click Element    //div[text()="unplanned2"]
    Click Element    xpath=//button[text()="Delete Unplanned Item"]
    ${xpathDeleteUnplanned}=    Find Current Window Element    Delete Unplanned Item    Delete
    Click Element    xpath=${xpathDeleteUnplanned}
    Wait Until Page Contains    Success.
    Add A New Unplanned Item    unplanned3
    Compare Text In Specific Xpath    //div[text()="unplanned1"]/../../td[1]/div    1    #check release ID    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="unplanned3"]/../../td[1]/div    3    #check release ID    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="unplanned1"]/../../td[3]/div    3    #check srpint ID    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="unplanned3"]/../../td[3]/div    3    #check srpint ID    #6    #should be 3
    Click Element    //input[@id='SprintCombo_UnplannedToolBar']
    Compare Text In Specific Xpath    //div[text()='ALL']/../div[2]    Sprint #1    #check sprint drop down list    #Sprint #4    #should be Sprint #1
    Compare Text In Specific Xpath    //div[text()='ALL']/../div[3]    Sprint #3    #check sprint drop down list    #Sprint #6    #should be Sprint #3
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Restrosapective
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Retrospective.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    Retrospective
    Add A New Restrospective    retrospective1
    Add A New Restrospective    retrospective2
    Click Element    //div[text()="retrospective2"]
    Click Element    xpath=//button[text()="Delete Retrospective"]
    ${xpathDeleteUnplanned}=    Find Current Window Element    Delete Retrospective    Delete
    Click Element    xpath=${xpathDeleteUnplanned}
    Wait Until Page Contains    Success.
    Add A New Restrospective    retrospective3
    Compare Text In Specific Xpath    //div[text()="retrospective1"]/../../td[1]/div    1    #check retrospective ID    #4    #should be 1
    Compare Text In Specific Xpath    //div[text()="retrospective3"]/../../td[1]/div    3    #check retrospective ID    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="retrospective1"]/../../td[2]/div    3    #check Sprint ID    #6    #should be 3
    Compare Text In Specific Xpath    //div[text()="retrospective3"]/../../td[2]/div    3    #check Sprint ID    #6    #should be 3
    Click Element    //input[@id="SprintCombo_RetrospectiveToolBar"]
    Compare Text In Specific Xpath    //div[text()='ALL']/../div[2]    Sprint #1    #check drop down list    #Sprint #4    #should be Sprint #1
    Compare Text In Specific Xpath    //div[text()='ALL']/../div[3]    Sprint #3    #check drop down list    #Sprint #6    #should be Sprint #3
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Scrum Report
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Scrum_Report.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    Scrum Report
    Select Frame    xpath=//iframe[@id="remainingWorkReport"]
    Click Element    xpath=//select[@id='ShowSprint']
    Compare Text In Specific Xpath    //select[@id='ShowSprint']/option[1]    Sprint 1    #check sprint ID in drop down list    #Sprint 4    #should be Sprint 1
    Compare Text In Specific Xpath    //select[@id='ShowSprint']/option[2]    Sprint 3    #check sprint ID in drop down list    #Sprint 6    #should be Sprint 3
    Reload Page
    Select Node Product    Scrum Report
    Mouse Down    xpath=//div[@id="ezScrum_Report_Page"]/div/div/div/div[1]/div[1]/ul/li[2]/a[2]/em/span/span
    Mouse Up    xpath=//div[@id="ezScrum_Report_Page"]/div/div/div/div[1]/div[1]/ul/li[2]/a[2]/em/span/span
    Select Frame    xpath=//iframe[@id="scheduleReport"]
    Click Element    xpath=//select[@id='ShowSprint']
    Compare Text In Specific Xpath    //select[@id='ShowSprint']/option[1]    Sprint 1    #check sprint ID in drop down list    #Sprint 4    #should be Sprint 1
    Compare Text In Specific Xpath    //select[@id='ShowSprint']/option[2]    Sprint 3    #check sprint ID in drop down list    #Sprint 6    #should be Sprint 3
    Reload Page
    [Teardown]    Clean Database and Exit ezScrum

Test Serial Number - Check ID In Task Board
    [Setup]    SetUp Data Base And Login ezScrum    Check_ID_In_Task_Board.sql
    Click Element    xpath=//div[text()="second"]
    Select Node Product    TaskBoard
    Select Node Product    Scrum Report
    Select Node Product    TaskBoard
    Compare Text In Specific Xpath    (//table[@class="StoryCard_Header"])[1]/tbody/tr/td/h2    [Story] #1    #check story card ID    #[Story] #4    #should be [Story] #1
    Compare Text In Specific Xpath    (//table[@class="StoryCard_Header"])[2]/tbody/tr/td/h2    [Story] #3    #check story card ID    #[Story] #6    #should be [Story] #3
    Compare Text In Specific Xpath    (//table[@class="TaskCard_Header"])[1]/tbody/tr/td/h2    [Task] #1    #check taslk card ID    #[Task] #4    #should be [Task] #1
    Compare Text In Specific Xpath    (//table[@class="TaskCard_Header"])[2]/tbody/tr/td/h2    [Task] #3    #check taslk card ID    #[Task] #6    #should be [Task] #3
    Click Element    xpath=//label[text()="Sprint ID:"]/../div[1]/div/input
    Compare Text In Specific Xpath    (//div[@class="x-combo-list-inner"])[1]/div[1]    Sprint #3    #check sprint ID in drop down list    #Sprint #6    #should be Sprint #3
    Compare Text In Specific Xpath    (//div[@class="x-combo-list-inner"])[1]/div[2]    Sprint #1    #check sprint ID in drop down list    #Sprint #4    #should be Sprint #1
    Compare value In Specific Input Field    //label[text()="ReleaseID:"]/../div[1]/input    Release #1    #check release ID    #Release #2    #should be Release #1
    [Teardown]    Clean Database and Exit ezScrum

*** Keywords ***
