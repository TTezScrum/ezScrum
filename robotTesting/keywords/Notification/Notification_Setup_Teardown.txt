*** Settings ***
Library           ../lib/Selenium2Improved.py
Resource          ../common_resource.txt
Resource          ../ezScrum_Login.txt
Library           ../lib/NotificationServiceHandler.py
Library           ../lib/AccountManagementServiceHandler.py

*** Keywords ***
Notification_Setup
    turnOn
    sleep    10s
    NotificationTurnOn
    sleep    10s
    Open Browser    ${LOGIN_URL}    ${BROWSER}
    ${attachFilePath}=    Catenate    SEPARATOR=\\    ${EXECDIR}    TestData    NotificationMicroservice    Test_Notification.sql
    Load Database    ${DB_URL}    ${DB_NAME}    ${DB_ACCOUNT}    ${DB_PASSWORD}    ${attachFilePath}
    ${attachFilePath2}=    Catenate    SEPARATOR=\\    ${EXECDIR}    TestData    NotificationMicroservice    Test_Notification_accms.sql
    Load Database    ${DB_URL}    account_ms    ${DB_ACCOUNT}    ${DB_PASSWORD}    ${attachFilePath2}
    ${attachFilePath3}=    Catenate    SEPARATOR=\\    ${EXECDIR}    TestData    NotificationMicroservice    Test_Notification_notificationms.sql
    Load Database    ${DB_URL}    notificationms    ${DB_ACCOUNT}    ${DB_PASSWORD}    ${attachFilePath3}
    Maximize Browser Window
    _InputLoginForm    user1    user1

Notification_Teardown
    turnOff
    NotificationTurnOff
    Clean DB    ${DB_URL}    ${DB_ACCOUNT}    ${DB_PASSWORD}    ${DB_NAME}
    Clean Microservice DB    ${DB_URL}    ${DB_ACCOUNT}    ${DB_PASSWORD}    account_ms
    Clean NotificationMs DB    ${DB_URL}    ${DB_ACCOUNT}    ${DB_PASSWORD}    notificationms
    Exit ezScrum System
